<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notes App</title>
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- FontAwesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Poppins', sans-serif;
        }
        /* Custom scrollbar for textareas to keep it looking clean */
        textarea::-webkit-scrollbar {
            width: 8px;
        }
        textarea::-webkit-scrollbar-thumb {
            background-color: #e2e8f0;
            border-radius: 4px;
        }
        /* Fade in animation for new notes */
        .fade-in {
            animation: fadeIn 0.3s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-[#c4b5fd] via-[#a78bfa] to-[#60a5fa] min-h-screen p-8 sm:p-12">

    <div class="max-w-6xl mx-auto">
        
        <!-- Header Section -->
        <div class="flex items-center gap-3 mb-8">
            <img src="https://cdn-icons-png.flaticon.com/512/2965/2965358.png" alt="Notes Icon" class="w-10 h-10 drop-shadow-md">
            <h1 class="text-white text-4xl font-bold drop-shadow-sm">Notes</h1>
        </div>

        <!-- Create Button -->
        <button onclick="addNote()" class="bg-[#8b5cf6] hover:bg-[#7c3aed] text-white px-6 py-3 rounded-full shadow-lg flex items-center gap-2 transition-all transform hover:scale-105 mb-10 font-semibold group">
            <i class="fa-solid fa-pen-to-square group-hover:rotate-12 transition-transform"></i>
            Create Notes
        </button>

        <!-- Notes Grid Container -->
        <div id="notes-container" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
            <!-- Notes will be injected here by JavaScript -->
        </div>

        <!-- Empty State Message (Hidden by default) -->
        <div id="empty-msg" class="hidden text-center text-white/80 mt-20 text-xl font-light">
            No notes yet. Click "Create Notes" to add one!
        </div>

    </div>

    <script>
        const notesContainer = document.getElementById('notes-container');
        const emptyMsg = document.getElementById('empty-msg');

        // 1. Load Notes from LocalStorage on Startup
        // We use JSON.parse to turn the string back into an array
        const notes = JSON.parse(localStorage.getItem('my-notes') || '[]');
        
        // Initial Render
        if (notes.length === 0) {
            emptyMsg.classList.remove('hidden');
        } else {
            notes.forEach(note => createNoteElement(note.id, note.content));
        }

        // 2. Function to Create the Note HTML Element
        function createNoteElement(id, content) {
            // Create the main card div
            const noteCard = document.createElement('div');
            noteCard.classList.add('bg-white', 'rounded-lg', 'shadow-xl', 'p-4', 'relative', 'fade-in', 'h-64', 'flex', 'flex-col', 'group', 'transition-shadow', 'hover:shadow-2xl');

            // The Text Area (Editable part)
            const textArea = document.createElement('textarea');
            textArea.classList.add('w-full', 'h-full', 'resize-none', 'outline-none', 'text-gray-700', 'bg-transparent', 'text-lg', 'placeholder-gray-300');
            textArea.placeholder = "Type your note here...";
            textArea.value = content;

            // The Delete Button (Hidden initially, shown on hover/focus)
            const deleteBtn = document.createElement('button');
            deleteBtn.classList.add('absolute', 'bottom-4', 'right-4', 'text-gray-400', 'hover:text-red-500', 'transition-colors', 'opacity-0', 'group-hover:opacity-100', 'focus:opacity-100');
            deleteBtn.innerHTML = '<i class="fa-solid fa-trash-can fa-lg"></i>';

            // Event Listener: Save logic (runs whenever you type)
            textArea.addEventListener('input', () => {
                updateNote(id, textArea.value);
            });

            // Event Listener: Delete logic
            deleteBtn.addEventListener('click', () => {
                const confirmDelete = confirm("Are you sure you want to delete this note?");
                if(confirmDelete) {
                    deleteNote(id, noteCard);
                }
            });

            // Assemble the card
            noteCard.appendChild(textArea);
            noteCard.appendChild(deleteBtn);
            
            // Insert the new note at the START of the list
            notesContainer.prepend(noteCard);
            
            // Hide empty message since we have a note now
            emptyMsg.classList.add('hidden');
        }

        // 3. Logic: Add a New Note
        function addNote() {
            const notes = getNotes();
            const noteObj = {
                id: Math.floor(Math.random() * 100000), // simple random ID
                content: ""
            };

            // Add to the logic array
            notes.push(noteObj);
            saveNotes(notes);

            // Add to the UI
            createNoteElement(noteObj.id, noteObj.content);
        }

        // 4. Logic: Update an existing note
        function updateNote(id, newContent) {
            const notes = getNotes();
            const targetNote = notes.filter(note => note.id == id)[0];
            targetNote.content = newContent;
            saveNotes(notes);
        }

        // 5. Logic: Delete a note
        function deleteNote(id, element) {
            const notes = getNotes().filter(note => note.id != id);
            saveNotes(notes);
            
            // Remove from UI with a small fade out effect
            element.style.opacity = '0';
            element.style.transform = 'scale(0.9)';
            setTimeout(() => {
                notesContainer.removeChild(element);
                if(notes.length === 0) emptyMsg.classList.remove('hidden');
            }, 300);
        }

        // Helper: Get notes from LocalStorage
        function getNotes() {
            return JSON.parse(localStorage.getItem('my-notes') || '[]');
        }

        // Helper: Save notes to LocalStorage
        function saveNotes(notes) {
            localStorage.setItem('my-notes', JSON.stringify(notes));
        }

    </script>
</body>
</html>